{% extends "stats/base.html" %}

{% load l10n %}
{% load bootstrap3 %}
{% load bootstrap_pagination %}

{% block title %}Stemgedrag per Partij - {{ block.super }}{% endblock %}

{% block content %}
{{ block.super }}

<div class="row" align="center">
  <div class="col-lg-12">
    <h3>Stemgedrag per Partij</h3>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 well well-filters">

    <div class="row">
      <form action="" method="get">

        <div class="col-sm-4">
          <h6 class="text-primary">Type</h6>
          {% bootstrap_field filter.form.type bound_css_class='' show_label=False show_help=False %}
        </div>

        <div class="col-sm-4">
          <h6 class="text-primary">Indiener</h6>
          {% bootstrap_field filter.form.submitter bound_css_class='' show_label=False show_help=False %}
        </div>

        <div class="col-sm-12">
          {% bootstrap_button content='Filter' button_type='submit' %}
        </div>

      </form>
    </div>

  </div>
</div>

<div class="row" align="center">
  <div class="col-lg-12">
    <table class="table table-striped table-hover table-condensed">
      <thead>
        <tr>
          <th>Partij</th>
          {% with stat=stats|first %}
          {% for period in stat.periods %}
          <th><a href="{% url 'government' period.government.slug %}">{{ period.government.name }}</a></th>
          {% endfor %}
          {% endwith %}
        </tr>
      </thead>
      <tbody>
      {% for stat in stats %}
        <tr>
          <td><a href="{% url 'party' stat.party.slug %}"><strong>{{ stat.party.name_short }}</strong></a></td>
          {% for period in stat.periods %}
          <td>
            {% if period.n_votes != 0 %}
            <div class="progress vote-result">
              <div class="progress-bar progress-bar-success" style="width: {{ period.for_percent|unlocalize }}%" title="{{ period.n_for|length }} voor">{{ period.for_percent|floatformat:0 }} %</div>
              <div class="progress-bar progress-bar-danger" style="width: {{ period.against_percent|unlocalize }}%" title="{{ period.n_against|length }} tegen">{{ period.against_percent|floatformat:0 }} %</div>
              <div class="progress-bar progress-bar-warning" style="width: {{ period.none_percent|unlocalize }}%" title="{{ period.n_none|length }} niet gestemd"></div>
            </div>
            {% endif %}
          </td>
          {% endfor %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<hr/>

{% endblock %}