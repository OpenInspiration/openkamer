{% extends "stats/base.html" %}

{% load l10n %}
{% load bootstrap3 %}
{% load bootstrap_pagination %}

{% block title %}Stemgedrag van Partijen - {{ block.super }}{% endblock %}

{% block content %}
{{ block.super }}

<div class="row">
  <div class="col-lg-12" align="center">
    <h3>Stemgedrag van Partijen</h3>
  </div>
  <div class="col-lg-12" align="left">
    <p>
      Deze pagina laat zien welke partijen voor of tegen stemden gedurenden verschillende kabinetsperioden.
    </p>
    <p>
      Het is mogelijk om de resultaten te filteren op het type stemming (wetsvoorstel, motie, amendemente), en op de partij die het voorstel (mede)indiende.
      Zo is het bijvoorbeeld mogelijk te zien hoe partijen stemden op wetsvoorstellen van de VVD of PvdA.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-sm-12 well well-filters">

    <div class="row">
      <form action="" method="get">

        <div class="col-sm-4">
          <h6 class="text-primary">Type</h6>
          {% bootstrap_field filter.form.type bound_css_class='' show_label=False show_help=False %}
        </div>

        <div class="col-sm-4">
          <h6 class="text-primary">Indiener (of medeindiener)</h6>
          {% bootstrap_field filter.form.submitter bound_css_class='' show_label=False show_help=False %}
        </div>

        <div class="col-sm-12">
          {% bootstrap_button content='Filter' button_type='submit' %}
        </div>

      </form>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <h6>{% if filter.qs|length == 0 %}geen stemmen{% elif filter.qs|length == 1%}1 stem{% else %}{{ filter.qs|length }} stemmen{% endif %} gevonden</h6>
  </div>
  <div class="col-md-6" align="right">
  </div>
</div>

{% if filter.qs|length != 0 %}
<div class="row" align="center">
  <div class="col-lg-12">
    <table class="table table-striped table-hover table-condensed">
      <thead>
        <tr>
          <th style="max-width: 100px;">Partij</th>
          {% with stat=stats|first %}
          {% for period in stat.periods %}
          <th><a href="{% url 'government' period.government.slug %}">{{ period.government.name }}</a></th>
          {% endfor %}
          {% endwith %}
        </tr>
      </thead>
      <tbody>
      {% for stat in stats %}
        <tr>
          <td style="max-width: 100px;"><a href="{% url 'party' stat.party.slug %}">{{ stat.party.name_short }}</a></td>
          {% for period in stat.periods %}
          <td>
            {% if period.n_votes != 0 %}
            <div class="progress vote-result">
              <div class="progress-bar progress-bar-success" style="width: {{ period.for_percent|unlocalize }}%" title="{{ period.n_for }} voor">{{ period.for_percent|floatformat:0 }} %</div>
              <div class="progress-bar progress-bar-danger" style="width: {{ period.against_percent|unlocalize }}%" title="{{ period.n_against }} tegen">{{ period.against_percent|floatformat:0 }} %</div>
              <div class="progress-bar progress-bar-warning" style="width: {{ period.none_percent|unlocalize }}%" title="{{ period.n_none }} niet gestemd"></div>
            </div>
            {% endif %}
          </td>
          {% endfor %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endif %}

<hr/>

{% endblock %}