{% extends "website/base.html" %}

{% block title %}Tweede Kamerleden {{ block.super }}{% endblock %}

{% block headcontent_end %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.min.css" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.nl.min.js" type="text/javascript"></script>
{% endblock %}

{% block content %}


<div class="row">
  <div class="col-lg-12">
    <div align="center">
      <h3>Kamerleden ({{ members|length }})</h3>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-4 col-sm-offset-4">
    <div id="date-input-container" class="input-group input-group-sm date">
      <span class="input-group-addon"><strong>Op</strong></span>
      <input type="text" class="form-control">
      <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
    </div>
  </div>
</div>

<script type="text/javascript">
var datepickerElement = $("#date-input-container.input-group.date");
datepickerElement.datepicker({
    format: "d MM yyyy",
    startView: 1,
    language: "nl",
    autoclose: true,
    todayHighlight: true
})

datepickerElement.datepicker('update', new Date({{ date.year }}, {{ date.month }}-1, {{ date.day }}));

datepickerElement.datepicker()
    .on('hide', function(e) {
        console.log(e.date.getFullYear());
        console.log(e.date.getMonth());
        console.log(e.date.getDate());
        var url = "/tweedekamerleden/" + e.date.getFullYear() + "/" + (e.date.getMonth()+1) + "/" + e.date.getDate() + "/";
        console.log(url);
        window.location.href = url;
    });
</script>

<hr/>

<div class="row">
{% for member in members %}
  <div class="col-sm-3 party-member-column" align="center">
    <div class="well">

      <p>
        <h5><a href="{% url 'person' member.person.slug %}">{{ member.person.fullname }}</a></h5>
        {% if member.party %}
          <small><a href="{% url 'party' member.party.slug %}">{{ member.party.name_short }}</a> <br/>
          {% if member.party.wikimedia_logo_url %}
            <img class='party-logo-small' src="{{ member.party.wikimedia_logo_url }}"> <br/>
          {% endif %}
        {% endif %}
        {% if member.person.wikipedia_url %}
          <a href="{{ member.person.wikipedia_url }}">wikipedia</a><br/>
        {% endif %}
        {% if member.person.parlement_and_politiek_id %}
          <a href="https://www.parlement.com/id/{{ member.person.parlement_and_politiek_id }}">parlement.com</a>
        {% endif %}
        </small>
      </p>

    </div>
  </div>

  {% if forloop.counter|divisibleby:4 %}
  <div class="clearfix"></div>
  {% endif %}
{% endfor %}
</div>

<hr/>

{% endblock %}
